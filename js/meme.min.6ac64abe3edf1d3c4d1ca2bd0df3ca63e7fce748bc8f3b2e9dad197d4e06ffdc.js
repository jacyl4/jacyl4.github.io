const throttle=(t,n)=>{let s,o,e;return function(){const i=this,a=arguments;s?(clearTimeout(o),o=setTimeout(function(){Date.now()-e>=n&&(t.apply(i,a),e=Date.now())},Math.max(n-(Date.now()-e),0))):(t.apply(i,a),e=Date.now(),s=!0)}},delayTime=420,headerFallbackWidth="54em",headerInner=document.querySelector(".header-inner"),mainInner=document.querySelector(".main-inner");if(mainInner!==null){const e=window.getComputedStyle(mainInner,null).getPropertyValue("width");headerInner.style.setProperty("--main-inner",e)}else headerInner.style.setProperty("--main-inner",headerFallbackWidth);headerInner.style.setProperty("opacity",1);function addDisplayNone(t){const e=document.getElementById(t);if(e!==null){const t=e.getAttribute("data-hide");t!==null&&(e.parentNode.style="display: none")}}addDisplayNone("theme-switcher"),addDisplayNone("lang-switcher");const navToggleLabel=document.querySelector(".nav-toggle"),navToggleLabelInner=document.createElement("div");navToggleLabelInner.className="nav-toggle-inner",navToggleLabel.appendChild(navToggleLabelInner);for(let e=0;e<3;e++){const t=document.createElement("span");navToggleLabelInner.appendChild(t)}const navToggle=document.getElementById("nav-toggle"),header=document.querySelector(".header"),navCurtain=document.querySelector(".nav-curtain");navToggle.addEventListener("change",e=>{e.target.checked?(header.classList.add("open"),navToggleLabel.classList.add("open"),header.classList.remove("fade"),navCurtain.style="display: block"):(header.classList.remove("open"),navToggleLabel.classList.remove("open"),header.classList.add("fade"))}),navCurtain.addEventListener("animationend",e=>{navToggle.checked||e.target.removeAttribute("style")}),window.addEventListener("scroll",throttle(function(){closeNav()},delayTime)),window.addEventListener("resize",throttle(function(){closeNav()},delayTime));function closeNav(){navToggle.checked&&(navToggle.checked=!1,header.classList.remove("open"),navToggleLabel.classList.remove("open"),header.classList.add("fade"))}const backToTop=document.getElementById("back-to-top");backToTop!==null&&window.addEventListener("scroll",throttle(function(){window.scrollY>100?backToTop.classList.add("show"):backToTop.classList.remove("show")},delayTime)),userPrefers==="dark"?changeMode("dark"):userPrefers==="light"?changeMode("light"):darkModeMediaQuery.matches?changeMode("dark"):lightModeMediaQuery.matches&&changeMode("light"),darkModeMediaQuery.addListener(e=>{const t=e.matches;t&&(changeModeMeta("dark"),changeMode("dark"),setMode("dark"))}),lightModeMediaQuery.addListener(e=>{const t=e.matches;t&&(changeModeMeta("light"),changeMode("light"),setMode("light"))});const themeSwitcher=document.getElementById("theme-switcher");themeSwitcher.addEventListener("click",function(){const e=document.documentElement.getAttribute("data-theme");e==="dark"?(changeModeMeta("light"),changeMode("light"),setMode("light")):(changeModeMeta("dark"),changeMode("dark"),setMode("dark"))}),window.addEventListener("storage",function(e){e.newValue==="dark"?(changeModeMeta("dark"),changeMode("dark")):(changeModeMeta("light"),changeMode("light"))});function changeMode(s){var t,n,e=s==="dark";document.getElementById("theme-switcher").innerHTML=e?"🌙":"🌞",t=e?"chroma":"chroma-dark",n=e?"chroma-dark":"chroma",[].slice.apply(document.getElementsByClassName(t)).forEach(e=>{e.className=n})}function setMode(e){window.localStorage.setItem("theme",e)}document.querySelectorAll("table").forEach(e=>{e.outerHTML=`<div class="table-container">${e.outerHTML}</div>`});const copyText="复制",copiedText="已复制";document.querySelectorAll(".post-body > pre").forEach(e=>{e.outerHTML=`<div style="position: relative">${e.outerHTML}</div>`});function addCopyButtons(e){const t=document.querySelectorAll("table.lntable, .highlight > pre, .post-body > div > pre");t.forEach(n=>{n.parentNode.style.position="relative";const t=document.createElement("button");if(t.className="copy-button",t.type="button",t.innerText=copyText,n.classList.contains("lntable"))var s=n.querySelectorAll(".lntd")[1];else s=n.querySelector("code");t.addEventListener("click",()=>{e.writeText(s.innerText).then(()=>{t.blur(),t.innerText=copiedText,setTimeout(()=>{t.innerText=copyText},1e3)}).catch(e=>{t.innerText="Error",console.error(e)})}),n.appendChild(t),n.parentNode.addEventListener("mouseover",()=>{t.style="visibility: visible; opacity: 1"}),n.parentNode.addEventListener("mouseout",()=>{t.style="visibility: hidden; opacity: 0"})})}if(navigator&&navigator.clipboard)addCopyButtons(navigator.clipboard);else{const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/clipboard-polyfill@2.8.6/dist/clipboard-polyfill.min.js",e.defer=!0,e.onload=function(){addCopyButtons(clipboard)},document.body.appendChild(e)}